# Лабораторная работа №5: Приведение гистограммы

## Вариант 6

### Описание задания

Данная лабораторная работа посвящена изучению методов повышения контраста изображений с помощью преобразований гистограммы.

### Параметры варианта

**Вариант 6:**
- **Тип изображений** (6 % 4 = 2): Фотографии с плавными переходами (облака, морские пейзажи, снежные равнины)
- **Предварительная обработка** (6 % 2 = 0): Осветление (эффект засвеченного изображения)

### Теоретическая основа

- **Эквализация гистограммы** - метод улучшения контраста изображения путем равномерного распределения яркостей пикселей по всему диапазону значений
- **Ручное приведение гистограммы** - линейное растяжение гистограммы от минимального до максимального значения интенсивности
- Рекомендуемая литература: Гонсалес Р., Вудс Р., Эддинс С. "Цифровая обработка изображений"

### Цели работы

1. Рассчитать гистограмму исходного изображения и отобразить её
2. Выполнить эквализацию гистограммы и рассчитать её гистограмму
3. Реализовать ручное приведение гистограммы
4. Отобразить три изображения рядом: исходное, после эквализации, после приведения
5. Отобразить три гистограммы и провести сравнительный анализ
6. Сделать выводы о применимости методов для различных типов изображений

### Требования к исходным изображениям

Необходимо подобрать **не менее 3-х фотографий** следующего типа:
- Облака
- Морские пейзажи
- Снежные равнины
- Другие изображения с плавными переходами яркости

### Структура проекта

```
lab5/
├── README.md           # Данный файл
├── main.py            # Основной скрипт программы
├── clouds.jpg         # Пример изображения
├── requirements.txt   # Зависимости (если есть)
└── results/           # Папка с результатами (опционально)
```

### Установка и запуск

#### Установка зависимостей

```bash
pip install opencv-python numpy matplotlib
```

Или используйте виртуальное окружение:

```bash
python -m venv .venv
.venv\Scripts\activate  # Windows
pip install opencv-python numpy matplotlib
```

#### Запуск программы

```bash
python main.py
```

### Описание реализованных функций

#### `lighten(img, k=1.5)`
Предварительное осветление изображения для имитации эффекта засветки:
- **Параметры:**
  - `img`: входное изображение (grayscale)
  - `k`: коэффициент осветления (по умолчанию 1.5)
- **Возвращает:** осветленное изображение

#### `manual_contrast(img)`
Ручное приведение гистограммы методом линейного растяжения:
- Формула: `stretched = (img - min) * (255 / (max - min))`
- **Параметры:**
  - `img`: входное изображение
- **Возвращает:** изображение с растянутой гистограммой

#### `plot_hist(ax, img, title)`
Построение гистограммы изображения:
- **Параметры:**
  - `ax`: объект matplotlib axis для отрисовки
  - `img`: изображение для анализа
  - `title`: заголовок гистограммы

#### `process_image(path)`
Основная функция обработки:
1. Загрузка изображения и преобразование в grayscale
2. Предварительное осветление
3. Эквализация гистограммы (cv2.equalizeHist)
4. Ручное приведение гистограммы
5. Визуализация результатов (2x3 subplot)

### Формат вывода

Программа создает окно с 6 графиками (2 строки × 3 столбца):

**Верхняя строка - изображения:**
- Исходное (осветленное)
- После эквализации
- После ручного приведения

**Нижняя строка - гистограммы:**
- Гистограмма исходного
- Гистограмма после эквализации
- Гистограмма после ручного приведения

### Ожидаемые результаты

#### Для изображений с плавными переходами:

1. **Исходное осветленное изображение:**
   - Гистограмма смещена вправо (в область высоких яркостей)
   - Низкий контраст
   - Возможна потеря деталей в светлых областях

2. **После эквализации:**
   - Гистограмма распределена более равномерно
   - Повышение контраста
   - Могут появиться артефакты на плавных переходах

3. **После ручного приведения:**
   - Гистограмма растянута на весь диапазон [0, 255]
   - Улучшение контраста без излишней агрессивности
   - Сохранение плавности переходов

### Примеры использования

```python
# Обработка одного изображения
process_image("clouds.jpg")

# Обработка нескольких изображений
images = ["clouds.jpg", "sea.jpg", "snow.jpg"]
for img_path in images:
    process_image(img_path)
```

### Выводы

При выполнении работы следует обратить внимание на:

1. **Влияние предварительной обработки:**
   - Как осветление влияет на распределение гистограммы
   - Какие детали теряются при засветке

2. **Сравнение методов:**
   - Эквализация vs ручное приведение
   - Какой метод лучше для плавных переходов
   - Появление артефактов

3. **Применимость методов:**
   - Когда эквализация эффективна
   - Когда предпочтительнее линейное растяжение
   - Ограничения каждого метода

### Критерии оценки

- ✅ Корректная реализация всех методов обработки
- ✅ Правильный выбор типа изображений согласно варианту
- ✅ Предварительная обработка (осветление)
- ✅ Визуализация результатов (изображения + гистограммы)
- ✅ Сравнительный анализ и выводы
- ✅ Обработка не менее 3-х изображений

### Технические детали

**Используемые библиотеки:**
- `OpenCV (cv2)` - загрузка изображений, эквализация гистограммы
- `NumPy` - математические операции, обработка массивов
- `Matplotlib` - визуализация результатов и построение гистограмм

**Методы:**
- `cv2.imread()` - загрузка изображения
- `cv2.cvtColor()` - преобразование в grayscale
- `cv2.equalizeHist()` - эквализация гистограммы
- Ручная реализация линейного растяжения гистограммы

### Дополнительные задачи (опционально)

1. Реализовать адаптивную эквализацию гистограммы (CLAHE)
2. Добавить обработку цветных изображений (HSV/Lab)
3. Сравнить результаты на разных типах изображений
4. Реализовать нелинейные преобразования гистограммы
5. Добавить метрики оценки качества (энтропия, контраст)

### Автор

**Вариант:** 6  
**Дата:** 2025

### Лицензия

Образовательный проект

---

## Контрольные вопросы

1. В чем различие между эквализацией и линейным растяжением гистограммы?
2. Почему эквализация может создавать артефакты на изображениях с плавными переходами?
3. Какие метрики можно использовать для оценки качества контрастирования?
4. Как предварительная обработка влияет на эффективность методов?
5. В каких случаях эквализация гистограммы неэффективна?

